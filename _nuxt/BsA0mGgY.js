var Me=Object.defineProperty;var je=(a,o,s)=>o in a?Me(a,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[o]=s;var me=(a,o,s)=>je(a,typeof o!="symbol"?o+"":o,s);import qe from"./BsBlWfNQ.js";import We from"./DKsx6Eac.js";import He from"./DwAdkREz.js";import ae from"./CagCrEFU.js";import Ce from"./rz56ioJB.js";import Ge from"./Bc2nC4-0.js";import oe from"./CXK9zG8y.js";import se from"./09UQmLYI.js";import he from"./BpzR12YL.js";import re from"./BxPwzCRT.js";import ne from"./DCK-oPNq.js";import{g as Ke,r as R,a6 as Ze,n as W,a7 as be,a8 as j,a5 as Je,j as S,X as h,a9 as ke,p as xe,aa as Qe,ab as Xe,u as we,ac as et,a0 as tt,e as J,T as le,f as ie,c as D,o as F,a as e,b as p,W as E,R as K,t as P,a2 as ue,S as at,O as _e,Q as Ve,a1 as ot,w as Y}from"./B4E7ZWnt.js";import{_ as Q}from"./DlAUqK2U.js";import Pe from"./BrXi86mP.js";import st from"./f_BBGyZQ.js";import rt from"./DwuhW_mb.js";import nt from"./BllQzvUM.js";import lt from"./BrLryY9u.js";import"./DW8g3rna.js";import"./CSTSGT1w.js";import"./BQx4TB3x.js";import"./Bga-6pQL.js";import"./-wg2_ubr.js";import"./G_TuWFjL.js";import"./DstCPa0p.js";import"./TPlCE-Bg.js";import"./DL5MBJTh.js";import"./gxi3oqc8.js";import"./Co5MXcSY.js";import"./BIOG6AuA.js";import"./C7teFEHm.js";import"./lRlpCMFR.js";import"./D3sxnxYH.js";import"./BAhs9R7t.js";import"./CV_ramxq.js";import"./BjfDo1ml.js";import"./Dsj-KqYa.js";import"./CvZK4hLd.js";import"./DV8LWX5L.js";import"./CnrAg6u0.js";function Se(a,o){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);o&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),s.push.apply(s,r)}return s}function N(a){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?Se(Object(s),!0).forEach(function(r){it(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Se(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function it(a,o,s){return o in a?Object.defineProperty(a,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[o]=s,a}function Te(a){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(a).reduce((s,r)=>(o.includes(r)||(s[r]=h(a[r])),s),{})}function te(a){return typeof a=="function"}function ut(a){return Qe(a)||Xe(a)}function Ee(a,o,s){let r=a;const l=o.split(".");for(let n=0;n<l.length;n++){if(!r[l[n]])return s;r=r[l[n]]}return r}function fe(a,o,s){return S(()=>a.some(r=>Ee(o,r,{[s]:!1})[s]))}function Re(a,o,s){return S(()=>a.reduce((r,l)=>{const n=Ee(o,l,{[s]:!1})[s]||[];return r.concat(n)},[]))}function Ie(a,o,s,r){return a.call(r,h(o),h(s),r)}function ze(a){return a.$valid!==void 0?!a.$valid:!a}function dt(a,o,s,r,l,n,f){let{$lazy:v,$rewardEarly:g}=l,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],k=arguments.length>8?arguments[8]:void 0,b=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0;const $=R(!!r.value),t=R(0);s.value=!1;const y=W([o,r].concat(c,d),()=>{if(v&&!r.value||g&&!b.value&&!s.value)return;let m;try{m=Ie(a,o,k,f)}catch(i){m=Promise.reject(i)}t.value++,s.value=!!t.value,$.value=!1,Promise.resolve(m).then(i=>{t.value--,s.value=!!t.value,n.value=i,$.value=ze(i)}).catch(i=>{t.value--,s.value=!!t.value,n.value=i,$.value=!0})},{immediate:!0,deep:typeof o=="object"});return{$invalid:$,$unwatch:y}}function ct(a,o,s,r,l,n,f,v){let{$lazy:g,$rewardEarly:c}=r;const k=()=>({}),b=S(()=>{if(g&&!s.value||c&&!v.value)return!1;let d=!0;try{const $=Ie(a,o,f,n);l.value=$,d=ze($)}catch($){l.value=$}return d});return{$unwatch:k,$invalid:b}}function pt(a,o,s,r,l,n,f,v,g,c,k){const b=R(!1),d=a.$params||{},$=R(null);let t,y;a.$async?{$invalid:t,$unwatch:y}=dt(a.$validator,o,b,s,r,$,l,a.$watchTargets,g,c,k):{$invalid:t,$unwatch:y}=ct(a.$validator,o,s,r,$,l,g,c);const m=a.$message;return{$message:te(m)?S(()=>m(Te({$pending:b,$invalid:t,$params:Te(d),$model:o,$response:$,$validator:n,$propertyPath:v,$property:f}))):m||"",$params:d,$pending:b,$invalid:t,$response:$,$unwatch:y}}function mt(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const o=h(a),s=Object.keys(o),r={},l={},n={};let f=null;return s.forEach(v=>{const g=o[v];switch(!0){case te(g.$validator):r[v]=g;break;case te(g):r[v]={$validator:g};break;case v==="$validationGroups":f=g;break;case v.startsWith("$"):n[v]=g;break;default:l[v]=g}}),{rules:r,nestedValidators:l,config:n,validationGroups:f}}const ft="__root";function vt(a,o,s,r,l,n,f,v,g){const c=Object.keys(a),k=r.get(l,a),b=R(!1),d=R(!1),$=R(0);if(k){if(!k.$partial)return k;k.$unwatch(),b.value=k.$dirty.value}const t={$dirty:b,$path:l,$touch:()=>{b.value||(b.value=!0)},$reset:()=>{b.value&&(b.value=!1)},$commit:()=>{}};return c.length?(c.forEach(y=>{t[y]=pt(a[y],o,t.$dirty,n,f,y,s,l,g,d,$)}),t.$externalResults=S(()=>v.value?[].concat(v.value).map((y,m)=>({$propertyPath:l,$property:s,$validator:"$externalResults",$uid:`${l}-externalResult-${m}`,$message:y,$params:{},$response:null,$pending:!1})):[]),t.$invalid=S(()=>{const y=c.some(m=>h(t[m].$invalid));return d.value=y,!!t.$externalResults.value.length||y}),t.$pending=S(()=>c.some(y=>h(t[y].$pending))),t.$error=S(()=>t.$dirty.value?t.$pending.value||t.$invalid.value:!1),t.$silentErrors=S(()=>c.filter(y=>h(t[y].$invalid)).map(y=>{const m=t[y];return j({$propertyPath:l,$property:s,$validator:y,$uid:`${l}-${y}`,$message:m.$message,$params:m.$params,$response:m.$response,$pending:m.$pending})}).concat(t.$externalResults.value)),t.$errors=S(()=>t.$dirty.value?t.$silentErrors.value:[]),t.$unwatch=()=>c.forEach(y=>{t[y].$unwatch()}),t.$commit=()=>{d.value=!0,$.value=Date.now()},r.set(l,a,t),t):(k&&r.set(l,a,t),t)}function bt(a,o,s,r,l,n,f){const v=Object.keys(a);return v.length?v.reduce((g,c)=>(g[c]=ye({validations:a[c],state:o,key:c,parentKey:s,resultsCache:r,globalConfig:l,instance:n,externalResults:f}),g),{}):{}}function yt(a,o,s){const r=S(()=>[o,s].filter(t=>t).reduce((t,y)=>t.concat(Object.values(h(y))),[])),l=S({get(){return a.$dirty.value||(r.value.length?r.value.every(t=>t.$dirty):!1)},set(t){a.$dirty.value=t}}),n=S(()=>{const t=h(a.$silentErrors)||[],y=r.value.filter(m=>(h(m).$silentErrors||[]).length).reduce((m,i)=>m.concat(...i.$silentErrors),[]);return t.concat(y)}),f=S(()=>{const t=h(a.$errors)||[],y=r.value.filter(m=>(h(m).$errors||[]).length).reduce((m,i)=>m.concat(...i.$errors),[]);return t.concat(y)}),v=S(()=>r.value.some(t=>t.$invalid)||h(a.$invalid)||!1),g=S(()=>r.value.some(t=>h(t.$pending))||h(a.$pending)||!1),c=S(()=>r.value.some(t=>t.$dirty)||r.value.some(t=>t.$anyDirty)||l.value),k=S(()=>l.value?g.value||v.value:!1),b=()=>{a.$touch(),r.value.forEach(t=>{t.$touch()})},d=()=>{a.$commit(),r.value.forEach(t=>{t.$commit()})},$=()=>{a.$reset(),r.value.forEach(t=>{t.$reset()})};return r.value.length&&r.value.every(t=>t.$dirty)&&b(),{$dirty:l,$errors:f,$invalid:v,$anyDirty:c,$error:k,$pending:g,$touch:b,$reset:$,$silentErrors:n,$commit:d}}function ye(a){let{validations:o,state:s,key:r,parentKey:l,childResults:n,resultsCache:f,globalConfig:v={},instance:g,externalResults:c}=a;const k=l?`${l}.${r}`:r,{rules:b,nestedValidators:d,config:$,validationGroups:t}=mt(o),y=N(N({},v),$),m=r?S(()=>{const B=h(s);return B?h(B[r]):void 0}):s,i=N({},h(c)||{}),x=S(()=>{const B=h(c);return r?B?h(B[r]):void 0:B}),u=vt(b,m,r,f,k,y,g,x,s),C=bt(d,m,k,f,y,g,x),_={};t&&Object.entries(t).forEach(B=>{let[A,L]=B;_[A]={$invalid:fe(L,C,"$invalid"),$error:fe(L,C,"$error"),$pending:fe(L,C,"$pending"),$errors:Re(L,C,"$errors"),$silentErrors:Re(L,C,"$silentErrors")}});const{$dirty:w,$errors:T,$invalid:U,$anyDirty:I,$error:V,$pending:H,$touch:G,$reset:pe,$silentErrors:z,$commit:$e}=yt(u,C,n),Le=r?S({get:()=>h(m),set:B=>{w.value=!0;const A=h(s),L=h(c);L&&(L[r]=i[r]),be(A[r])?A[r].value=B:A[r]=B}}):null;r&&y.$autoDirty&&W(m,()=>{w.value||G();const B=h(c);B&&(B[r]=i[r])},{flush:"sync"});async function Ne(){return G(),y.$rewardEarly&&($e(),await we()),await we(),new Promise(B=>{if(!H.value)return B(!U.value);const A=W(H,()=>{B(!U.value),A()})})}function Ae(B){return(n.value||{})[B]}function Ye(){be(c)?c.value=i:Object.keys(i).length===0?Object.keys(c).forEach(B=>{delete c[B]}):Object.assign(c,i)}return j(N(N(N({},u),{},{$model:Le,$dirty:w,$error:V,$errors:T,$invalid:U,$anyDirty:I,$pending:H,$touch:G,$reset:pe,$path:k||ft,$silentErrors:z,$validate:Ne,$commit:$e},n&&{$getResultsForChild:Ae,$clearExternalResults:Ye,$validationGroups:_}),C))}class gt{constructor(){this.storage=new Map}set(o,s,r){this.storage.set(o,{rules:s,result:r})}checkRulesValidity(o,s,r){const l=Object.keys(r),n=Object.keys(s);return n.length!==l.length||!n.every(v=>l.includes(v))?!1:n.every(v=>s[v].$params?Object.keys(s[v].$params).every(g=>h(r[v].$params[g])===h(s[v].$params[g])):!0)}get(o,s){const r=this.storage.get(o);if(!r)return;const{rules:l,result:n}=r,f=this.checkRulesValidity(o,s,l),v=n.$unwatch?n.$unwatch:()=>({});return f?n:{$dirty:n.$dirty,$partial:!0,$unwatch:v}}}const ee={COLLECT_ALL:!0,COLLECT_NONE:!1},Be=Symbol("vuelidate#injectChildResults"),De=Symbol("vuelidate#removeChildResults");function ht(a){let{$scope:o,instance:s}=a;const r={},l=R([]),n=S(()=>l.value.reduce((k,b)=>(k[b]=h(r[b]),k),{}));function f(k,b){let{$registerAs:d,$scope:$,$stopPropagation:t}=b;t||o===ee.COLLECT_NONE||$===ee.COLLECT_NONE||o!==ee.COLLECT_ALL&&o!==$||(r[d]=k,l.value.push(d))}s.__vuelidateInjectInstances=[].concat(s.__vuelidateInjectInstances||[],f);function v(k){l.value=l.value.filter(b=>b!==k),delete r[k]}s.__vuelidateRemoveInstances=[].concat(s.__vuelidateRemoveInstances||[],v);const g=ke(Be,[]);xe(Be,s.__vuelidateInjectInstances);const c=ke(De,[]);return xe(De,s.__vuelidateRemoveInstances),{childResults:n,sendValidationResultsToParent:g,removeValidationResultsFromParent:c}}function Oe(a){return new Proxy(a,{get(o,s){return typeof o[s]=="object"?Oe(o[s]):S(()=>o[s])}})}let Fe=0;function $t(a,o){var s;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(r=a,a=void 0,o=void 0);let{$registerAs:l,$scope:n=ee.COLLECT_ALL,$stopPropagation:f,$externalResults:v,currentVueInstance:g}=r;const c=g||((s=Ke())===null||s===void 0?void 0:s.proxy),k=c?c.$options:{};l||(Fe+=1,l=`_vuelidate_${Fe}`);const b=R({}),d=new gt,{childResults:$,sendValidationResultsToParent:t,removeValidationResultsFromParent:y}=c?ht({$scope:n,instance:c}):{childResults:R({})};if(!a&&k.validations){const m=k.validations;o=R({}),Ze(()=>{o.value=c,W(()=>te(m)?m.call(o.value,new Oe(o.value)):m,i=>{b.value=ye({validations:i,state:o,childResults:$,resultsCache:d,globalConfig:r,instance:c,externalResults:v||c.vuelidateExternalResults})},{immediate:!0})}),r=k.validationsConfig||r}else{const m=be(a)||ut(a)?a:j(a||{});W(m,i=>{b.value=ye({validations:i,state:o,childResults:$,resultsCache:d,globalConfig:r,instance:c??{},externalResults:v})},{immediate:!0})}return c&&(t.forEach(m=>m(b,{$registerAs:l,$scope:n,$stopPropagation:f})),Je(()=>y.forEach(m=>m(l)))),S(()=>N(N({},h(b.value)),$.value))}const de=a=>{if(a=h(a),Array.isArray(a))return!!a.length;if(a==null)return!1;if(a===!1)return!0;if(a instanceof Date)return!isNaN(a.getTime());if(typeof a=="object"){for(let o in a)return!0;return!1}return!!String(a).length},Ue=a=>(a=h(a),Array.isArray(a)?a.length:typeof a=="object"?Object.keys(a).length:String(a).length);function q(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return r=>(r=h(r),!de(r)||o.every(l=>(l.lastIndex=0,l.test(r))))}q(/^[a-zA-Z]*$/);q(/^[a-zA-Z0-9]*$/);q(/^\d*(\.\d+)?$/);const kt=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var xt=q(kt),wt={$validator:xt,$message:"Value is not a valid email address",$params:{type:"email"}};function _t(a){return o=>!de(o)||Ue(o)<=h(a)}function X(a){return{$validator:_t(a),$message:o=>{let{$params:s}=o;return`The maximum length allowed is ${s.max}`},$params:{max:a,type:"maxLength"}}}function Vt(a){return o=>!de(o)||Ue(o)>=h(a)}function ve(a){return{$validator:Vt(a),$message:o=>{let{$params:s}=o;return`This field should be at least ${s.min} characters long`},$params:{min:a,type:"minLength"}}}function St(a){return typeof a=="string"&&(a=a.trim()),de(a)}var Z={$validator:St,$message:"Value is required",$params:{type:"required"}};const Tt=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;q(Tt);q(/(^[0-9]*$)|(^-[0-9]+$)/);q(/^[-]?\d*(\.\d+)?$/);const M=class M{constructor(){me(this,"api");this.api=et()}static getInstance(){return M.instance||(M.instance=new M),M.instance}async fetchSettings(){try{return(await this.api.get("/api/settings")).data}catch(o){throw console.error("Failed to fetch settings:",o),o}}async updateShopSettings(o){try{return(await this.api.put("/api/settings/shop",o)).data.shop}catch(s){throw console.error("Failed to update shop settings:",s),s}}async updateBarcodeSettings(o){try{return(await this.api.put("/api/settings/barcode",o)).data.barcode}catch(s){throw console.error("Failed to update barcode settings:",s),s}}async updateReceiptSettings(o){try{return(await this.api.put("/api/settings/receipt",o)).data.receipt}catch(s){throw console.error("Failed to update receipt settings:",s),s}}async updateBackupSettings(o){try{return(await this.api.put("/api/settings/backup",o)).data.backup}catch(s){throw console.error("Failed to update backup settings:",s),s}}async performBackup(){try{return await this.api.post("/api/settings/backup/now",{})}catch(o){throw console.error("Failed to perform backup:",o),o}}async restoreBackup(o){try{return(await this.api.post(`/api/settings/backup/${o}/restore`,{})).success}catch(s){throw console.error("Failed to restore backup:",s),s}}};me(M,"instance");let ge=M;const Rt={id:"",name:"My Pharmacy",address:"",phone:"",email:"",currency:"INR",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",timeFormat:"HH:mm",decimalPlaces:2,taxInclusive:!0,defaultTaxRate:5,taxRate:5},Bt={barcodeType:"CODE128",barcodeWidth:2,barcodeHeight:100,displayValue:!0,fontSize:20,margin:10,includePrice:!0,includeExpiry:!0},Dt={headerText:"Thank you for shopping with us!",footerText:"Please visit again!",showShopDetails:!0,showTaxDetails:!0,showBarcode:!0,paperWidth:80,fontSize:"small",printCopy:1,autoPrint:!1},Ft={autoBackup:!1,backupFrequency:"daily",backupTime:"23:00",retentionDays:7,cloudBackup:!1,cloudProvider:"",cloudFolder:"",localBackup:!1,localPath:"",compression:!1,encryption:!1,backupLocation:"",keepBackups:30},O={shop:Rt,barcode:Bt,receipt:Dt,backup:Ft},ce=tt("settings",()=>{const a=R({...O.shop}),o=R({...O.barcode}),s=R({...O.receipt}),r=R({...O.backup,backupTime:O.backup.backupTime}),l=R(!1),n=R(null),f=R(!1),v=ge.getInstance(),g=R(!1),c=S(()=>a.value.name),k=S(()=>({USD:"$",EUR:"€",GBP:"£",INR:"₹",JPY:"¥"})[a.value.currency]||a.value.currency),b=async()=>{f.value||await d()},d=async()=>{if(!f.value)try{l.value=!0,n.value=null;const _=await v.fetchSettings();a.value=_.shop,o.value=_.barcode,s.value=_.receipt,r.value={..._.backup,backupTime:_.backup.backupTime||new Date().toISOString()},f.value=!0}catch(_){console.error("Failed to initialize settings:",_),n.value="Failed to load settings. Using default settings.",u()}finally{l.value=!1}},$=async _=>{try{l.value=!0,n.value=null;const w=await v.updateShopSettings(_);return a.value={...a.value,...w},g.value=!1,w}catch(w){throw console.error("Failed to update shop settings:",w),n.value="Failed to update shop settings",w}finally{l.value=!1}},t=async _=>{try{l.value=!0,n.value=null;const w=await v.updateBarcodeSettings(_);return o.value={...o.value,...w},g.value=!1,w}catch(w){throw console.error("Failed to update barcode settings:",w),n.value="Failed to update barcode settings",w}finally{l.value=!1}},y=async _=>{try{l.value=!0,n.value=null;const w=await v.updateReceiptSettings(_);return s.value={...s.value,...w},g.value=!1,w}catch(w){throw console.error("Failed to update receipt settings:",w),n.value="Failed to update receipt settings",w}finally{l.value=!1}},m=async _=>{try{l.value=!0,n.value=null;const w=await v.updateBackupSettings(_);return r.value={...r.value,...w},g.value=!1,w}catch(w){throw console.error("Failed to update backup settings:",w),n.value="Failed to update backup settings",w}finally{l.value=!1}},i=async()=>{try{return l.value=!0,n.value=null,await v.performBackup()}catch(_){throw console.error("Failed to perform backup:",_),n.value="Failed to perform backup",_}finally{l.value=!1}},x=async _=>{try{l.value=!0,n.value=null;const w=await v.restoreBackup(_);return w&&await d(),w}catch(w){throw console.error("Failed to restore backup:",w),n.value="Failed to restore backup",w}finally{l.value=!1}},u=()=>{a.value={...O.shop},o.value={...O.barcode},s.value={...O.receipt},r.value={...O.backup},g.value=!1};return{shop:a,barcode:o,receipt:s,backup:r,isLoading:l,error:n,isInitialized:f,hasChanges:g,shopName:c,currencySymbol:k,initialize:d,updateShopSettings:$,updateBarcodeSettings:t,updateReceiptSettings:y,ensureInitialized:b,updateBackupSettings:m,performBackup:i,restoreBackup:x,resetToDefaults:u,setHasChanges:_=>{g.value=_}}}),Ct={class:"shop-settings"},Pt={class:"form-grid"},Et={class:"form-section"},It={class:"p-fluid"},zt={class:"field"},Ot={key:0,class:"p-error"},Ut={class:"field"},Lt={key:0,class:"p-error"},Nt={class:"field"},At={key:0,class:"p-error"},Yt={class:"field"},Mt={key:0,class:"p-error"},jt={class:"form-section"},qt={class:"p-fluid"},Wt={class:"field"},Ht={class:"field"},Gt={class:"field"},Kt={class:"form-section"},Zt={class:"p-fluid"},Jt={class:"field"},Qt={class:"field"},Xt={class:"field"},ea={class:"form-section"},ta={class:"p-fluid"},aa={class:"field"},oa={key:0,class:"p-error"},sa={class:"field-checkbox"},ra={class:"form-actions"},na=J({__name:"ShopSettings",setup(a){const o=le(),s=ce(),r=R(!1);ie(async()=>{await s.ensureInitialized(),b()});const l=j({shop:{name:"My Pharmacy",address:"",phone:"",email:"",currency:"INR",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",timeFormat:"HH:mm",decimalPlaces:2,taxInclusive:!0,defaultTaxRate:5,taxRate:5,gstNumber:void 0,licenseNumber:void 0,logoUrl:void 0}}),n={shop:{name:{required:Z,minLength:ve(3),maxLength:X(100)},address:{required:Z,minLength:ve(5),maxLength:X(500)},phone:{required:Z,minLength:ve(10),maxLength:X(15)},email:{required:Z,email:wt,maxLength:X(100)},defaultTaxRate:{required:Z,minValue:$=>$>=0,maxValue:$=>$<=100}}},f=$t(n,l),v=[{name:"Indian Rupee (₹)",code:"INR"},{name:"US Dollar ($)",code:"USD"},{name:"Euro (€)",code:"EUR"},{name:"British Pound (£)",code:"GBP"}],g=[{name:"India (Asia/Kolkata)",value:"Asia/Kolkata"},{name:"UTC",value:"UTC"},{name:"UTC+05:30",value:"Asia/Colombo"},{name:"UTC+05:45",value:"Asia/Kathmandu"}],c=[{name:"DD/MM/YYYY",value:"DD/MM/YYYY"},{name:"MM/DD/YYYY",value:"MM/DD/YYYY"},{name:"YYYY-MM-DD",value:"YYYY-MM-DD"},{name:"DD MMM YYYY",value:"DD MMM YYYY"}],k=[{name:"24-hour (14:30)",value:"HH:mm"},{name:"12-hour (2:30 PM)",value:"h:mm A"}],b=()=>{const{id:$,...t}=s.shop;l.shop={...t},f.value.$reset()},d=async()=>{if(!await f.value.$validate()){o.add({severity:"error",summary:"Validation Error",detail:"Please fill in all required fields correctly.",life:5e3});return}r.value=!0;try{await s.updateShopSettings(l.shop),o.add({severity:"success",summary:"Success",detail:"Shop settings updated successfully",life:3e3})}catch(t){console.error("Failed to update shop settings:",t),o.add({severity:"error",summary:"Error",detail:"Failed to update shop settings. Please try again.",life:5e3})}finally{r.value=!1}};return($,t)=>{const y=ae,m=Ce,i=Ge,x=oe,u=se,C=he,_=re,w=ne;return F(),D("div",Ct,[e("form",{onSubmit:ue(d,["prevent"]),class:"settings-form"},[e("div",Pt,[e("div",Et,[t[16]||(t[16]=e("h3",null,"Shop Information",-1)),e("div",It,[e("div",zt,[t[12]||(t[12]=e("label",{for:"shopName"},"Shop Name",-1)),p(y,{id:"shopName",modelValue:l.shop.name,"onUpdate:modelValue":t[0]||(t[0]=T=>l.shop.name=T),placeholder:"Enter shop name",class:K({"p-invalid":h(f).shop.name.$error})},null,8,["modelValue","class"]),h(f).shop.name.$error?(F(),D("small",Ot,P(h(f).shop.name.$errors[0].$message),1)):E("",!0)]),e("div",Ut,[t[13]||(t[13]=e("label",{for:"address"},"Address",-1)),p(m,{id:"address",modelValue:l.shop.address,"onUpdate:modelValue":t[1]||(t[1]=T=>l.shop.address=T),"auto-resize":!0,rows:"3",placeholder:"Enter shop address",class:K({"p-invalid":h(f).shop.address.$error})},null,8,["modelValue","class"]),h(f).shop.address.$error?(F(),D("small",Lt,P(h(f).shop.address.$errors[0].$message),1)):E("",!0)]),e("div",Nt,[t[14]||(t[14]=e("label",{for:"phone"},"Phone",-1)),p(i,{id:"phone",modelValue:l.shop.phone,"onUpdate:modelValue":t[2]||(t[2]=T=>l.shop.phone=T),mask:"(999) 999-9999",placeholder:"(123) 456-7890",class:K({"p-invalid":h(f).shop.phone.$error})},null,8,["modelValue","class"]),h(f).shop.phone.$error?(F(),D("small",At,P(h(f).shop.phone.$errors[0].$message),1)):E("",!0)]),e("div",Yt,[t[15]||(t[15]=e("label",{for:"email"},"Email",-1)),p(y,{id:"email",modelValue:l.shop.email,"onUpdate:modelValue":t[3]||(t[3]=T=>l.shop.email=T),type:"email",placeholder:"shop@example.com",class:K({"p-invalid":h(f).shop.email.$error})},null,8,["modelValue","class"]),h(f).shop.email.$error?(F(),D("small",Mt,P(h(f).shop.email.$errors[0].$message),1)):E("",!0)])])]),e("div",jt,[t[20]||(t[20]=e("h3",null,"Business Information",-1)),e("div",qt,[e("div",Wt,[t[17]||(t[17]=e("label",{for:"gstNumber"},"GST Number",-1)),p(y,{id:"gstNumber",modelValue:l.shop.gstNumber,"onUpdate:modelValue":t[4]||(t[4]=T=>l.shop.gstNumber=T),placeholder:"22AAAAA0000A1Z5"},null,8,["modelValue"])]),e("div",Ht,[t[18]||(t[18]=e("label",{for:"licenseNumber"},"License Number",-1)),p(y,{id:"licenseNumber",modelValue:l.shop.licenseNumber,"onUpdate:modelValue":t[5]||(t[5]=T=>l.shop.licenseNumber=T),placeholder:"Enter license number"},null,8,["modelValue"])]),e("div",Gt,[t[19]||(t[19]=e("label",{for:"currency"},"Currency",-1)),p(x,{id:"currency",modelValue:l.shop.currency,"onUpdate:modelValue":t[6]||(t[6]=T=>l.shop.currency=T),options:v,optionLabel:"name",optionValue:"code",placeholder:"Select currency"},null,8,["modelValue"])])])]),e("div",Kt,[t[24]||(t[24]=e("h3",null,"Regional Settings",-1)),e("div",Zt,[e("div",Jt,[t[21]||(t[21]=e("label",{for:"timezone"},"Timezone",-1)),p(x,{id:"timezone",modelValue:l.shop.timezone,"onUpdate:modelValue":t[7]||(t[7]=T=>l.shop.timezone=T),options:g,optionLabel:"name",optionValue:"value",placeholder:"Select timezone"},null,8,["modelValue"])]),e("div",Qt,[t[22]||(t[22]=e("label",{for:"dateFormat"},"Date Format",-1)),p(x,{id:"dateFormat",modelValue:l.shop.dateFormat,"onUpdate:modelValue":t[8]||(t[8]=T=>l.shop.dateFormat=T),options:c,optionLabel:"name",optionValue:"value",placeholder:"Select date format"},null,8,["modelValue"])]),e("div",Xt,[t[23]||(t[23]=e("label",{for:"timeFormat"},"Time Format",-1)),p(x,{id:"timeFormat",modelValue:l.shop.timeFormat,"onUpdate:modelValue":t[9]||(t[9]=T=>l.shop.timeFormat=T),options:k,optionLabel:"name",optionValue:"value",placeholder:"Select time format"},null,8,["modelValue"])])])]),e("div",ea,[t[27]||(t[27]=e("h3",null,"Tax Settings",-1)),e("div",ta,[e("div",aa,[t[25]||(t[25]=e("label",{for:"defaultTaxRate"},"Default Tax Rate (%)",-1)),p(u,{id:"defaultTaxRate",modelValue:l.shop.defaultTaxRate,"onUpdate:modelValue":t[10]||(t[10]=T=>l.shop.defaultTaxRate=T),mode:"decimal",min:0,max:100,minFractionDigits:2,maxFractionDigits:2,class:K({"p-invalid":h(f).shop.defaultTaxRate.$error})},null,8,["modelValue","class"]),h(f).shop.defaultTaxRate.$error?(F(),D("small",oa,P(h(f).shop.defaultTaxRate.$errors[0].$message),1)):E("",!0)]),e("div",sa,[p(C,{id:"taxInclusive",modelValue:l.shop.taxInclusive,"onUpdate:modelValue":t[11]||(t[11]=T=>l.shop.taxInclusive=T),binary:!0},null,8,["modelValue"]),t[26]||(t[26]=e("label",{for:"taxInclusive"},"Prices include tax",-1))])])])]),e("div",ra,[p(_,{type:"button",label:"Reset",icon:"pi pi-times",class:"p-button-text",disabled:r.value,onClick:b},null,8,["disabled"]),p(_,{type:"submit",label:"Save Changes",icon:"pi pi-save",loading:r.value},null,8,["loading"])])],32),p(w)])}}}),la=Q(na,[["__scopeId","data-v-c098b708"]]),ia={class:"barcode-settings"},ua={class:"form-grid"},da={class:"form-section"},ca={class:"p-fluid"},pa={class:"field"},ma={class:"form-section"},fa={class:"p-fluid"},va={class:"field"},ba={class:"field"},ya={class:"field"},ga={class:"field"},ha={class:"form-section"},$a={class:"p-fluid"},ka={class:"field-checkbox"},xa={class:"field-checkbox"},wa={class:"field-checkbox"},_a={class:"form-section"},Va={class:"barcode-preview"},Sa={class:"preview-settings"},Ta={class:"field"},Ra={class:"form-actions"},Ba=J({__name:"BarcodeSettings",setup(a){const o=le(),s=ce(),r=R(!1),l=R("123456789012");ie(async()=>{await s.ensureInitialized(),g()});const n=j({barcode:{barcodeType:"CODE128",barcodeWidth:2,barcodeHeight:100,displayValue:!0,fontSize:12,margin:10,includePrice:!1,includeExpiry:!1}}),f=[{name:"Code 128",value:"CODE128"},{name:"EAN-13",value:"EAN13"},{name:"UPC",value:"UPC"},{name:"Code 39",value:"CODE39"},{name:"ITF-14",value:"ITF14"},{name:"MSI",value:"MSI"},{name:"Pharmacode",value:"pharmacode"}],v=b=>["CODE128","EAN13","UPC","CODE39","ITF14","MSI","pharmacode"].includes(b),g=()=>{const b={...s.barcode};v(b.barcodeType)||(console.warn("Invalid barcode type in store, resetting to default"),b.barcodeType="CODE128"),n.barcode={...b}},c=async()=>{try{const b={...n.barcode};if(!v(b.barcodeType))throw new Error("Invalid barcode type selected");await s.updateBarcodeSettings(b),o.add({severity:"success",summary:"Success",detail:"Barcode settings saved successfully",life:3e3})}catch(b){console.error("Error saving barcode settings:",b),o.add({severity:"error",summary:"Error",detail:b instanceof Error?b.message:"Failed to save barcode settings. Please try again.",life:5e3})}finally{r.value=!1}},k=()=>{o.add({severity:"info",summary:"Print Test",detail:"Sending test barcode to printer...",life:3e3})};return W(()=>n.barcode,()=>{console.log("Barcode settings updated:",n.barcode)},{deep:!0}),(b,d)=>{const $=oe,t=se,y=he,m=ae,i=re,x=ne;return F(),D("div",ia,[e("form",{onSubmit:ue(c,["prevent"]),class:"settings-form"},[e("div",ua,[e("div",da,[d[11]||(d[11]=e("h3",null,"Barcode Type",-1)),e("div",ca,[e("div",pa,[d[9]||(d[9]=e("label",{for:"barcodeType"},"Barcode Format",-1)),p($,{id:"barcodeType",modelValue:n.barcode.barcodeType,"onUpdate:modelValue":d[0]||(d[0]=u=>n.barcode.barcodeType=u),options:f,optionLabel:"name",optionValue:"value",placeholder:"Select barcode type"},null,8,["modelValue"]),d[10]||(d[10]=e("small",{class:"text-color-secondary"}," Select the barcode format that matches your products ",-1))])])]),e("div",ma,[d[16]||(d[16]=e("h3",null,"Display Settings",-1)),e("div",fa,[e("div",va,[d[12]||(d[12]=e("label",{for:"barcodeWidth"},"Width (mm)",-1)),p(t,{id:"barcodeWidth",modelValue:n.barcode.barcodeWidth,"onUpdate:modelValue":d[1]||(d[1]=u=>n.barcode.barcodeWidth=u),mode:"decimal",min:1,max:100,step:.1},null,8,["modelValue"])]),e("div",ba,[d[13]||(d[13]=e("label",{for:"barcodeHeight"},"Height (mm)",-1)),p(t,{id:"barcodeHeight",modelValue:n.barcode.barcodeHeight,"onUpdate:modelValue":d[2]||(d[2]=u=>n.barcode.barcodeHeight=u),mode:"decimal",min:10,max:200},null,8,["modelValue"])]),e("div",ya,[d[14]||(d[14]=e("label",{for:"fontSize"},"Font Size (pt)",-1)),p(t,{id:"fontSize",modelValue:n.barcode.fontSize,"onUpdate:modelValue":d[3]||(d[3]=u=>n.barcode.fontSize=u),mode:"decimal",min:8,max:72},null,8,["modelValue"])]),e("div",ga,[d[15]||(d[15]=e("label",{for:"margin"},"Margin (px)",-1)),p(t,{id:"margin",modelValue:n.barcode.margin,"onUpdate:modelValue":d[4]||(d[4]=u=>n.barcode.margin=u),mode:"decimal",min:0,max:50},null,8,["modelValue"])])])]),e("div",ha,[d[20]||(d[20]=e("h3",null,"Content",-1)),e("div",$a,[e("div",ka,[p(y,{id:"displayValue",modelValue:n.barcode.displayValue,"onUpdate:modelValue":d[5]||(d[5]=u=>n.barcode.displayValue=u),binary:!0},null,8,["modelValue"]),d[17]||(d[17]=e("label",{for:"displayValue"},"Show barcode value",-1))]),e("div",xa,[p(y,{id:"includePrice",modelValue:n.barcode.includePrice,"onUpdate:modelValue":d[6]||(d[6]=u=>n.barcode.includePrice=u),binary:!0},null,8,["modelValue"]),d[18]||(d[18]=e("label",{for:"includePrice"},"Include price in barcode",-1))]),e("div",wa,[p(y,{id:"includeExpiry",modelValue:n.barcode.includeExpiry,"onUpdate:modelValue":d[7]||(d[7]=u=>n.barcode.includeExpiry=u),binary:!0,disabled:!n.barcode.displayValue},null,8,["modelValue","disabled"]),d[19]||(d[19]=e("label",{for:"includeExpiry"},"Include expiry date",-1))])])]),e("div",_a,[d[23]||(d[23]=e("h3",null,"Preview",-1)),e("div",Va,[d[22]||(d[22]=e("div",{class:"barcode-container"},[e("div",{class:"barcode-placeholder"},[e("i",{class:"pi pi-barcode",style:{"font-size":"3rem",opacity:"0.3"}}),e("p",null,"Barcode Preview"),e("small",{class:"text-color-secondary"}," Preview will update automatically ")])],-1)),e("div",Sa,[e("div",Ta,[d[21]||(d[21]=e("label",{for:"previewText"},"Test Barcode",-1)),p(m,{id:"previewText",modelValue:l.value,"onUpdate:modelValue":d[8]||(d[8]=u=>l.value=u),placeholder:"Enter text to preview"},null,8,["modelValue"])]),p(i,{label:"Print Test",icon:"pi pi-print",class:"p-button-outlined",onClick:k})])])])]),e("div",Ra,[p(i,{type:"button",label:"Reset",icon:"pi pi-times",class:"p-button-text",disabled:r.value,onClick:g},null,8,["disabled"]),p(i,{type:"submit",label:"Save Changes",icon:"pi pi-save",loading:r.value},null,8,["loading"])])],32),p(x)])}}}),Da=Q(Ba,[["__scopeId","data-v-de03a244"]]),Fa={class:"receipt-settings"},Ca={class:"form-grid"},Pa={class:"form-section"},Ea={class:"p-fluid"},Ia={class:"field"},za={class:"field"},Oa={class:"field-checkbox"},Ua={class:"form-section"},La={class:"p-fluid"},Na={class:"field"},Aa={class:"field-checkbox"},Ya={class:"field-checkbox"},Ma={class:"field"},ja={class:"form-section"},qa={class:"p-fluid"},Wa={class:"field"},Ha={class:"field"},Ga={class:"field"},Ka={class:"field-checkbox"},Za={class:"field"},Ja={class:"field"},Qa={class:"form-section"},Xa={class:"receipt-preview-container"},eo={class:"receipt-header"},to={class:"receipt-date"},ao={class:"receipt-items"},oo={class:"item-name"},so={class:"item-qty"},ro={class:"item-price"},no={class:"item-total"},lo={class:"receipt-totals"},io={class:"receipt-row"},uo={key:0,class:"receipt-row"},co={class:"receipt-row font-bold"},po={class:"receipt-footer"},mo={key:0,class:"receipt-footer-text"},fo={key:1,class:"receipt-barcode"},vo={class:"barcode"},bo={class:"form-actions"},yo=J({__name:"ReceiptSettings",setup(a){const o=le(),s=ce(),r=R(!1),l=R(!1),n=j({receipt:{headerText:"Thank you for shopping with us!",footerText:"Please visit again!",showShopDetails:!0,showTaxDetails:!0,showBarcode:!0,paperWidth:80,fontSize:"small",printCopy:1,autoPrint:!1,printerName:""}}),f=R([{id:1,name:"Paracetamol 500mg",quantity:2,price:5.99},{id:2,name:"Ibuprofen 200mg",quantity:1,price:8.5},{id:3,name:"Vitamin C 1000mg",quantity:1,price:5}]),v=[{name:"Small",value:"small"},{name:"Medium",value:"medium"},{name:"Large",value:"large"}],g=S(()=>f.value.reduce((m,i)=>m+i.quantity*i.price,0)),c=S(()=>n.receipt.showTaxDetails?g.value*.05:0),k=S(()=>0);S(()=>g.value+c.value-k.value),ie(async()=>{await b()});const b=async()=>{l.value=!0;try{await s.ensureInitialized(),n.receipt={...s.receipt}}catch(m){console.error("Failed to load receipt settings:",m),o.add({severity:"error",summary:"Error",detail:"Failed to load receipt settings",life:5e3})}finally{l.value=!1}},d=()=>{n.receipt={headerText:"Thank you for shopping with us!",footerText:"Please visit again!",showShopDetails:!0,showTaxDetails:!0,showBarcode:!0,paperWidth:80,fontSize:"small",printCopy:1,autoPrint:!1,printerName:""}},$=async()=>{r.value=!0;try{await s.updateReceiptSettings(n.receipt),o.add({severity:"success",summary:"Success",detail:"Receipt settings saved successfully",life:3e3})}catch(m){console.error("Failed to save receipt settings:",m),o.add({severity:"error",summary:"Error",detail:"Failed to save receipt settings",life:5e3})}finally{r.value=!1}},t=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(m),y=m=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(m);return(m,i)=>{const x=Ce,u=Pe,C=he,_=se,w=oe,T=ae,U=re,I=ne;return F(),D("div",Fa,[e("form",{onSubmit:ue($,["prevent"]),class:"settings-form"},[e("div",Ca,[e("div",Pa,[i[14]||(i[14]=e("h3",null,"Receipt Header",-1)),e("div",Ea,[e("div",Ia,[i[10]||(i[10]=e("label",{for:"headerText"},"Header Text",-1)),p(x,{id:"headerText",modelValue:n.receipt.headerText,"onUpdate:modelValue":i[0]||(i[0]=V=>n.receipt.headerText=V),"auto-resize":!0,rows:"3",placeholder:"Enter receipt header text"},null,8,["modelValue"]),i[11]||(i[11]=e("small",null,"This text will appear at the top of each receipt",-1))]),e("div",za,[i[13]||(i[13]=e("label",{for:"showShopDetails"},"Show Shop Details",-1)),e("div",Oa,[p(u,{id:"showShopDetails",modelValue:n.receipt.showShopDetails,"onUpdate:modelValue":i[1]||(i[1]=V=>n.receipt.showShopDetails=V)},null,8,["modelValue"]),i[12]||(i[12]=e("label",{for:"showShopDetails",class:"ml-2"},"Show shop information on receipt",-1))])])])]),e("div",Ua,[i[19]||(i[19]=e("h3",null,"Receipt Content",-1)),e("div",La,[e("div",Na,[i[17]||(i[17]=e("label",null,"Display Options",-1)),e("div",Aa,[p(C,{id:"showTaxDetails",modelValue:n.receipt.showTaxDetails,"onUpdate:modelValue":i[2]||(i[2]=V=>n.receipt.showTaxDetails=V),binary:!0},null,8,["modelValue"]),i[15]||(i[15]=e("label",{for:"showTaxDetails",class:"ml-2"},"Show Tax Details",-1))]),e("div",Ya,[p(C,{id:"showBarcode",modelValue:n.receipt.showBarcode,"onUpdate:modelValue":i[3]||(i[3]=V=>n.receipt.showBarcode=V),binary:!0},null,8,["modelValue"]),i[16]||(i[16]=e("label",{for:"showBarcode",class:"ml-2"},"Show Barcode",-1))])]),e("div",Ma,[i[18]||(i[18]=e("label",{for:"paperWidth"},"Paper Width (mm)",-1)),p(_,{id:"paperWidth",modelValue:n.receipt.paperWidth,"onUpdate:modelValue":i[4]||(i[4]=V=>n.receipt.paperWidth=V),min:50,max:120,suffix:" mm"},null,8,["modelValue"])])])]),e("div",ja,[i[25]||(i[25]=e("h3",null,"Receipt Footer",-1)),e("div",qa,[e("div",Wa,[i[20]||(i[20]=e("label",{for:"fontSize"},"Font Size",-1)),p(w,{id:"fontSize",modelValue:n.receipt.fontSize,"onUpdate:modelValue":i[5]||(i[5]=V=>n.receipt.fontSize=V),options:v,optionLabel:"name",optionValue:"value",placeholder:"Select font size"},null,8,["modelValue"])]),e("div",Ha,[i[21]||(i[21]=e("label",{for:"printCopy"},"Number of Copies",-1)),p(_,{id:"printCopy",modelValue:n.receipt.printCopy,"onUpdate:modelValue":i[6]||(i[6]=V=>n.receipt.printCopy=V),min:1,max:5},null,8,["modelValue"])]),e("div",Ga,[e("div",Ka,[p(C,{id:"autoPrint",modelValue:n.receipt.autoPrint,"onUpdate:modelValue":i[7]||(i[7]=V=>n.receipt.autoPrint=V),binary:!0},null,8,["modelValue"]),i[22]||(i[22]=e("label",{for:"autoPrint",class:"ml-2"},"Auto Print After Sale",-1))])]),e("div",Za,[i[23]||(i[23]=e("label",{for:"footerText"},"Footer Text",-1)),p(x,{id:"footerText",modelValue:n.receipt.footerText,"onUpdate:modelValue":i[8]||(i[8]=V=>n.receipt.footerText=V),"auto-resize":!0,rows:"3",placeholder:"Enter footer text"},null,8,["modelValue"])]),e("div",Ja,[i[24]||(i[24]=e("label",{for:"printerName"},"Printer Name (Optional)",-1)),p(T,{id:"printerName",modelValue:n.receipt.printerName,"onUpdate:modelValue":i[9]||(i[9]=V=>n.receipt.printerName=V),placeholder:"Enter printer name"},null,8,["modelValue"])])])]),e("div",Qa,[i[32]||(i[32]=e("h3",null,"Receipt Preview",-1)),e("div",Xa,[e("div",{class:"receipt-preview",style:at({width:`${n.receipt.paperWidth*6}px`})},[e("div",eo,[i[26]||(i[26]=e("h2",null,"Sample Pharmacy",-1)),e("p",to,P(y(new Date)),1),i[27]||(i[27]=e("div",{class:"receipt-divider"},null,-1))]),e("div",ao,[(F(!0),D(_e,null,Ve(f.value,V=>(F(),D("div",{class:"receipt-item",key:V.id},[e("div",oo,P(V.name),1),e("div",so,"x"+P(V.quantity),1),e("div",ro,P(t(V.price)),1),e("div",no,P(t(V.price*V.quantity)),1)]))),128))]),e("div",lo,[e("div",io,[i[28]||(i[28]=e("span",null,"Subtotal:",-1)),e("span",null,P(t(25.98)),1)]),n.receipt.showTaxDetails?(F(),D("div",uo,[i[29]||(i[29]=e("span",null,"Tax (10%):",-1)),e("span",null,P(t(2.6)),1)])):E("",!0),e("div",co,[i[30]||(i[30]=e("span",null,"Total:",-1)),e("span",null,P(t(28.58)),1)])]),e("div",po,[n.receipt.footerText?(F(),D("div",mo,P(n.receipt.footerText),1)):E("",!0),n.receipt.showBarcode?(F(),D("div",fo,[e("div",vo,[(F(),D(_e,null,Ve(20,V=>e("span",{key:V},"|")),64))]),i[31]||(i[31]=e("div",{class:"barcode-number"},"1234567890",-1))])):E("",!0)])],4)])])]),e("div",bo,[p(U,{type:"button",label:"Reset",icon:"pi pi-times",class:"p-button-text",disabled:r.value,onClick:d},null,8,["disabled"]),p(U,{type:"submit",label:"Save Changes",icon:"pi pi-save",loading:r.value},null,8,["loading"])])],32),p(I)])}}}),go=Q(yo,[["__scopeId","data-v-087b60d6"]]),ho={class:"backup-settings"},$o={class:"form-grid"},ko={class:"form-section"},xo={class:"p-fluid"},wo={class:"field"},_o={class:"field-checkbox"},Vo={key:0,class:"field"},So={key:1,class:"field"},To={key:2,class:"field"},Ro={key:3,class:"field"},Bo={class:"p-inputgroup"},Do={key:0,class:"form-section"},Fo={class:"p-fluid"},Co={class:"field"},Po={class:"p-text-secondary"},Eo={class:"form-section"},Io={class:"backup-actions"},zo={class:"backup-action"},Oo={class:"backup-action"},Uo={class:"backup-action"},Lo={class:"danger-zone"},No={class:"danger-action"},Ao={class:"danger-action"},Yo={class:"form-actions"},Mo=J({__name:"BackupSettings",setup(a){const o=le(),s=ot(),r=ce(),l=R(!1),n=R(!1),f=R(!1),v=[{name:"Daily",value:"daily"},{name:"Weekly",value:"weekly"},{name:"Monthly",value:"monthly"}],g=x=>{if(!x)return"Never";try{return new Date(x).toLocaleString()}catch(u){return console.error("Error formatting date:",u),"Invalid date"}};ie(async()=>{try{await r.initialize(),k()}catch(x){console.error("Failed to initialize settings:",x),o.add({severity:"error",summary:"Error",detail:"Failed to load backup settings",life:5e3})}});const c=j({backup:{autoBackup:!0,backupFrequency:"daily",backupTime:new Date,backupLocation:"",keepBackups:30}}),k=()=>{const x=new Date;x.setHours(2,0,0,0);const u=r.backup.backupTime&&r.backup.backupTime!==""?new Date(r.backup.backupTime):x;c.backup={...r.backup,backupTime:u}},b=async()=>{l.value=!0;try{const x={...c.backup,backupTime:c.backup.backupTime.toISOString(),lastBackup:c.backup.lastBackup||void 0};await r.updateBackupSettings(x),o.add({severity:"success",summary:"Success",detail:"Backup settings updated successfully",life:3e3})}catch(x){console.error("Failed to update backup settings:",x),o.add({severity:"error",summary:"Error",detail:"Failed to update backup settings. Please try again.",life:5e3})}finally{l.value=!1}},d=async()=>{n.value=!0;try{const x=await r.performBackup();o.add({severity:"success",summary:"Backup Created",detail:x.message||"Backup created successfully",life:5e3})}catch(x){console.error("Failed to create backup:",x),o.add({severity:"error",summary:"Backup Failed",detail:"Failed to create backup. Please try again.",life:5e3})}finally{n.value=!1}},$=async()=>{f.value=!0;try{await new Promise(x=>setTimeout(x,1e3)),o.add({severity:"success",summary:"Download Started",detail:"Your backup file download has started.",life:5e3})}catch(x){console.error("Failed to download backup:",x),o.add({severity:"error",summary:"Download Failed",detail:"Failed to download backup. Please try again.",life:5e3})}finally{f.value=!1}},t=x=>{x.files[0]&&s.require({message:"Are you sure you want to restore from this backup? This will overwrite your current data.",header:"Confirm Restore",icon:"pi pi-exclamation-triangle",accept:async()=>{try{await new Promise(C=>setTimeout(C,2e3)),o.add({severity:"success",summary:"Restore Complete",detail:"Your data has been successfully restored from the backup.",life:5e3})}catch(C){console.error("Failed to restore from backup:",C),o.add({severity:"error",summary:"Restore Failed",detail:"Failed to restore from backup. Please try again.",life:5e3})}},reject:()=>{o.add({severity:"info",summary:"Restore Cancelled",detail:"The restore operation was cancelled.",life:3e3})}})},y=()=>{o.add({severity:"info",summary:"Directory Picker",detail:"This would open a directory picker in a real implementation.",life:3e3})},m=()=>{s.require({message:"Are you sure you want to reset all backup settings to their default values?",header:"Confirm Reset",icon:"pi pi-exclamation-triangle",accept:()=>{k(),o.add({severity:"success",summary:"Settings Reset",detail:"Backup settings have been reset to their default values.",life:3e3})},reject:()=>{}})},i=()=>{s.require({message:"Are you sure you want to delete all backup files? This action cannot be undone.",header:"Delete All Backups",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:async()=>{try{await new Promise(x=>setTimeout(x,1e3)),o.add({severity:"success",summary:"Backups Deleted",detail:"All backup files have been deleted.",life:5e3})}catch(x){console.error("Failed to delete backups:",x),o.add({severity:"error",summary:"Deletion Failed",detail:"Failed to delete backup files. Please try again.",life:5e3})}},reject:()=>{}})};return(x,u)=>{const C=Pe,_=oe,w=st,T=se,U=ae,I=re,V=rt,H=nt,G=lt,pe=ne;return F(),D("div",ho,[e("form",{onSubmit:ue(b,["prevent"]),class:"settings-form"},[e("div",$o,[e("div",ko,[u[12]||(u[12]=e("h3",null,"Automatic Backups",-1)),e("div",xo,[e("div",wo,[u[5]||(u[5]=e("label",{for:"autoBackup"},"Enable Automatic Backups",-1)),e("div",_o,[p(C,{id:"autoBackup",modelValue:c.backup.autoBackup,"onUpdate:modelValue":u[0]||(u[0]=z=>c.backup.autoBackup=z)},null,8,["modelValue"])])]),c.backup.autoBackup?(F(),D("div",Vo,[u[6]||(u[6]=e("label",{for:"backupFrequency"},"Backup Frequency",-1)),p(_,{id:"backupFrequency",modelValue:c.backup.backupFrequency,"onUpdate:modelValue":u[1]||(u[1]=z=>c.backup.backupFrequency=z),options:v,optionLabel:"name",optionValue:"value",placeholder:"Select backup frequency",disabled:!c.backup.autoBackup},null,8,["modelValue","disabled"])])):E("",!0),c.backup.autoBackup?(F(),D("div",So,[u[7]||(u[7]=e("label",{for:"backupTime"},"Backup Time",-1)),p(w,{id:"backupTime",modelValue:c.backup.backupTime,"onUpdate:modelValue":u[2]||(u[2]=z=>c.backup.backupTime=z),timeOnly:"",hourFormat:"12",disabled:!c.backup.autoBackup},null,8,["modelValue","disabled"])])):E("",!0),c.backup.autoBackup?(F(),D("div",To,[u[8]||(u[8]=e("label",{for:"keepBackups"},"Keep Backups (days)",-1)),p(T,{id:"keepBackups",modelValue:c.backup.keepBackups,"onUpdate:modelValue":u[3]||(u[3]=z=>c.backup.keepBackups=z),min:1,max:365,disabled:!c.backup.autoBackup},null,8,["modelValue","disabled"]),u[9]||(u[9]=e("small",null,"Number of days to keep backup files before automatic deletion",-1))])):E("",!0),c.backup.autoBackup?(F(),D("div",Ro,[u[10]||(u[10]=e("label",{for:"backupLocation"},"Backup Location",-1)),e("div",Bo,[p(U,{id:"backupLocation",modelValue:c.backup.backupLocation,"onUpdate:modelValue":u[4]||(u[4]=z=>c.backup.backupLocation=z),placeholder:"/path/to/backup",disabled:!c.backup.autoBackup},null,8,["modelValue","disabled"]),p(I,{icon:"pi pi-folder-open",class:"p-button-outlined",onClick:y,disabled:!c.backup.autoBackup},null,8,["disabled"])]),u[11]||(u[11]=e("small",null,"Leave empty to use default backup directory",-1))])):E("",!0)])]),c.backup.lastBackup?(F(),D("div",Do,[u[14]||(u[14]=e("h3",null,"Last Backup",-1)),e("div",Fo,[e("div",Co,[u[13]||(u[13]=e("label",null,"Last Backup Time",-1)),e("div",Po,P(g(c.backup.lastBackup)),1)])])])):E("",!0),e("div",Eo,[u[23]||(u[23]=e("h3",null,"Backup Actions",-1)),e("div",Io,[e("div",zo,[p(I,{label:"Create Backup Now",icon:"pi pi-save",class:"p-button-outlined p-button-success",loading:n.value,onClick:d},null,8,["loading"]),u[15]||(u[15]=e("small",null,"Create a manual backup immediately",-1))]),e("div",Oo,[p(V,{mode:"basic",name:"backupFile",auto:!0,customUpload:!0,accept:".pharmabackup,.zip",maxFileSize:1e6,chooseLabel:"Restore from Backup",onUploader:t}),u[16]||(u[16]=e("small",null,"Restore data from a backup file",-1))]),e("div",Uo,[p(I,{label:"Download Latest Backup",icon:"pi pi-download",class:"p-button-outlined",loading:f.value,onClick:$},null,8,["loading"]),u[17]||(u[17]=e("small",null,"Download the most recent backup file",-1))])]),p(H,{align:"center"},{default:Y(()=>u[18]||(u[18]=[e("span",{class:"p-tag"},"Danger Zone",-1)])),_:1,__:[18]}),e("div",Lo,[e("div",No,[u[19]||(u[19]=e("h4",null,"Reset to Defaults",-1)),u[20]||(u[20]=e("p",null,"Reset all backup settings to their default values",-1)),p(I,{label:"Reset Settings",icon:"pi pi-undo",class:"p-button-outlined p-button-warning",onClick:m})]),e("div",Ao,[u[21]||(u[21]=e("h4",null,"Delete All Backups",-1)),u[22]||(u[22]=e("p",null,"Permanently delete all backup files",-1)),p(I,{label:"Delete Backups",icon:"pi pi-trash",class:"p-button-outlined p-button-danger",onClick:i})])])])]),e("div",Yo,[p(I,{type:"button",label:"Reset",icon:"pi pi-times",class:"p-button-text",disabled:l.value,onClick:k},null,8,["disabled"]),p(I,{type:"submit",label:"Save Changes",icon:"pi pi-save",loading:l.value},null,8,["loading"])])],32),p(G),p(pe)])}}}),jo=Q(Mo,[["__scopeId","data-v-c3aa63f7"]]),qo={class:"settings-container"},Wo=J({__name:"index",setup(a){return(o,s)=>{const r=qe,l=We,n=He;return F(),D("div",qo,[s[0]||(s[0]=e("div",{class:"settings-header mb-4"},[e("h1",{class:"text-2xl font-bold text-900 m-0"},"Settings"),e("p",{class:"text-600 mt-2 mb-0"},"Manage your pharmacy's configuration and preferences")],-1)),p(n,null,{content:Y(()=>[p(l,{class:"settings-tabs"},{default:Y(()=>[p(r,{header:"Shop"},{default:Y(()=>[p(la)]),_:1}),p(r,{header:"Barcode"},{default:Y(()=>[p(Da)]),_:1}),p(r,{header:"Receipt"},{default:Y(()=>[p(go)]),_:1}),p(r,{header:"Backup"},{default:Y(()=>[p(jo)]),_:1})]),_:1})]),_:1})])}}}),Es=Q(Wo,[["__scopeId","data-v-324e9cd9"]]);export{Es as default};

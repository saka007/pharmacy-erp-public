import{e as V,Y as _,T as I,Z as R,j as C,r,f as A,c as v,o as d,a as e,M as L,W as g,b as c,w as M,d as B,t as b,X as m,R as h}from"./B4E7ZWnt.js";import N from"./CvZK4hLd.js";import T from"./CagCrEFU.js";import $ from"./hFFl5RJu.js";import j from"./BpzR12YL.js";import D from"./BxPwzCRT.js";import"./-wg2_ubr.js";import"./BQx4TB3x.js";import"./DW8g3rna.js";import"./BAhs9R7t.js";import"./DL5MBJTh.js";import"./CV_ramxq.js";import"./CyCr1dB6.js";import"./gxi3oqc8.js";import"./Co5MXcSY.js";import"./D3sxnxYH.js";import"./TPlCE-Bg.js";const F={class:"login-container"},U={class:"login-wrapper"},q={class:"login-card"},W={class:"login-form"},Y={class:"form-group"},z={class:"p-inputgroup"},X={key:0,class:"p-error"},Z={class:"form-group"},G={class:"p-inputgroup"},H={key:0,class:"p-error"},J={class:"flex align-items-center justify-content-between mb-4"},K={class:"flex align-items-center"},O={class:"login-footer"},Q={class:"text-sm text-color-secondary"},we=V({__name:"login",setup(ee){const f=_(),y=I(),w=R(),x=C(()=>w.isAuthenticated),P=w.login,o=r(""),a=r(""),i=r(""),p=r(!1),n=r(!1),u=r(!1);A(()=>{S(),k()});function S(){const l=localStorage.getItem("savedEmail"),s=localStorage.getItem("savedPassword");l&&s&&(o.value=l,a.value=atob(s),n.value=!0)}function k(){x.value&&f.push("/dashboard")}async function E(){var l,s;if(u.value=!0,!(!o.value||!a.value))try{p.value=!0,i.value="",await P({email:o.value,password:a.value,rememberMe:n.value}),n.value?(localStorage.setItem("savedEmail",o.value),localStorage.setItem("savedPassword",btoa(a.value))):(localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword")),y.add({severity:"success",summary:"Success",detail:"Login successful",life:3e3}),await f.push("/dashboard")}catch(t){console.error("Login error:",t),i.value=((s=(l=t.response)==null?void 0:l.data)==null?void 0:s.message)||"Invalid email or password",y.add({severity:"error",summary:"Login Failed",detail:i.value,life:5e3}),a.value=""}finally{p.value=!1}}return(l,s)=>(d(),v("div",F,[e("div",U,[e("div",q,[s[9]||(s[9]=e("div",{class:"login-header"},[e("img",{src:"https://www.primefaces.org/primevue/images/logo.svg",alt:"Pharmacy ERP",class:"logo"}),e("h1",null,"Welcome to Pharmacy ERP"),e("p",{class:"text-color-secondary"},"Please sign in to continue")],-1)),e("div",W,[i.value?(d(),L(m(N),{key:0,severity:"error",closable:!1,class:"mb-4"},{default:M(()=>[B(b(i.value),1)]),_:1})):g("",!0),e("div",Y,[s[4]||(s[4]=e("label",{for:"email",class:"block mb-2"},"Email",-1)),e("div",z,[s[3]||(s[3]=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-envelope"})],-1)),c(m(T),{id:"email",modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=t=>o.value=t),type:"email",placeholder:"Enter your email",autocomplete:"email",class:h(["w-full",{"p-invalid":u.value&&!o.value}])},null,8,["modelValue","class"])]),u.value&&!o.value?(d(),v("small",X,"Email is required.")):g("",!0)]),e("div",Z,[s[6]||(s[6]=e("div",{class:"flex justify-content-between align-items-center mb-2"},[e("label",{for:"password",class:"block"},"Password"),e("a",{class:"text-sm text-primary font-medium cursor-pointer hover:underline"}," Forgot password? ")],-1)),e("div",G,[s[5]||(s[5]=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-lock"})],-1)),c(m($),{id:"password",modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=t=>a.value=t),feedback:!1,toggleMask:"",placeholder:"Enter your password","input-class":"w-full",class:h({"p-invalid":u.value&&!a.value}),"input-style":{width:"100%"}},null,8,["modelValue","class"])]),u.value&&!a.value?(d(),v("small",H,"Password is required.")):g("",!0)]),e("div",J,[e("div",K,[c(m(j),{modelValue:n.value,"onUpdate:modelValue":s[2]||(s[2]=t=>n.value=t),binary:!0,"input-id":"remember-me",class:"mr-2"},null,8,["modelValue"]),s[7]||(s[7]=e("label",{for:"remember-me",class:"text-sm cursor-pointer"},"Remember me",-1))])]),c(m(D),{type:"button",label:"Sign In",icon:"pi pi-user",class:"w-full",loading:p.value,onClick:E},null,8,["loading"]),s[8]||(s[8]=e("div",{class:"text-center mt-4"},[e("span",{class:"text-sm text-color-secondary"},"Don't have an account? "),e("a",{class:"text-primary font-medium cursor-pointer hover:underline"},"Sign up")],-1))])]),e("div",O,[e("p",Q," Â© "+b(new Date().getFullYear())+" Pharmacy ERP. All rights reserved. ",1),s[10]||(s[10]=e("div",{class:"flex gap-4"},[e("a",{href:"#",class:"text-sm text-color-secondary hover:text-primary transition-colors"},"Privacy Policy"),e("a",{href:"#",class:"text-sm text-color-secondary hover:text-primary transition-colors"},"Terms of Service")],-1))])]),s[11]||(s[11]=e("div",{class:"login-image"},[e("div",{class:"image-overlay"},[e("h2",null,"Pharmacy ERP System"),e("p",null,"Streamline your pharmacy operations with our comprehensive management solution")])],-1))]))}});export{we as default};
